# gChess Application Configuration
#
# This file contains default configuration values for development.
# Production values should be provided via environment variables.

ktor {
    deployment {
        port = 8080
        port = ${?PORT}  # Override with PORT env var if set
    }

    application {
        modules = [ com.gchess.ApplicationKt.module ]
    }
}

database {
    # JDBC URL for PostgreSQL
    # Format: jdbc:postgresql://host:port/database_name
    url = "jdbc:postgresql://localhost:5432/gchess_dev"
    url = ${?DATABASE_URL}  # Override with DATABASE_URL env var

    # Database credentials
    user = "gchess"
    user = ${?DATABASE_USER}  # Override with DATABASE_USER env var

    password = "gchess"
    password = ${?DATABASE_PASSWORD}  # Override with DATABASE_PASSWORD env var

    # Connection pool configuration (HikariCP)
    poolSize = 10
    poolSize = ${?DATABASE_POOL_SIZE}  # Override with DATABASE_POOL_SIZE env var
}

jwt {
    # JWT secret for signing tokens
    # WARNING: MUST be overridden in production via JWT_SECRET env var
    # Minimum 256 bits recommended
    secret = "gchess-jwt-secret-key-change-in-production"
    secret = ${?JWT_SECRET}  # Override with JWT_SECRET env var (REQUIRED in production)

    # JWT issuer (should match across all services)
    issuer = "gchess"

    # JWT audience (identifies the intended recipients)
    audience = "gchess-users"

    # Token validity in milliseconds (default: 24 hours)
    validity = 86400000  # 24 * 60 * 60 * 1000
    validity = ${?JWT_VALIDITY_MS}  # Override with JWT_VALIDITY_MS env var

    # Realm for authentication challenges
    realm = "gChess API"
}
